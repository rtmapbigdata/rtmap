exchange.sources = r1 r2 r3
exchange.sinks = k1 k2 k3
exchange.channels = c1 c2 c3
# ------------------------- ruian file upload ------------------------
exchange.sources.r1.type = cn.rtmap.bigdata.ingest.source.FileSource
exchange.sources.r1.sched.express = 0 */5 * * * ? *
exchange.sources.r1.sched.threads = 1
exchange.sources.r1.verf.extension = .verf
exchange.sources.r1.data.from = ods_ruian
exchange.sources.r1.incoming.dir = /mnt/data/share/ingest/incoming/ruian
exchange.sources.r1.backup.dir = /mnt/data/share/ingest/bak/ruian
exchange.sources.r1.channels = c1

exchange.sources.r1.interceptors = i1 i2 i3 i4
exchange.sources.r1.interceptors.i1.type = cn.rtmap.bigdata.ingest.intercept.ServiceIdDetector$Builder
exchange.sources.r1.interceptors.i2.type = cn.rtmap.bigdata.ingest.intercept.BatchPackager$Builder
exchange.sources.r1.interceptors.i3.type = cn.rtmap.bigdata.ingest.intercept.EventCompressor$Builder
exchange.sources.r1.interceptors.i4.type = cn.rtmap.bigdata.ingest.intercept.EventSerializer$Builder

exchange.sinks.k1.type = org.apache.flume.sink.kafka.KafkaSink
exchange.sinks.k1.topic = exchange-in
exchange.sinks.k1.brokerList = 211.157.182.227:6668,211.157.182.228:6668,211.157.182.229:6668
exchange.sinks.k1.requiredAcks = 1
exchange.sinks.k1.batchSize = 20
exchange.sinks.k1.channel = c1

exchange.channels.c1.type = memory
exchange.channels.c1.capacity = 100000
exchange.channels.c1.transactionCapacity = 80000

# -------------------------- ruian http get --------------------------
exchange.sources.r2.type = cn.rtmap.bigdata.ingest.source.RuianSource
exchange.sources.r2.sched.threads = 1
exchange.sources.r2.get.express = 0 10 5 * * ? *
exchange.sources.r2.incoming.dir = /mnt/data/share/ingest/incoming/ruian
exchange.sources.r2.alter.email = zhangxiangwei@rtmap.com
exchange.sources.r2.before.days = 6
exchange.sources.r2.channels = c2

exchange.sinks.k2.type = null
exchange.sinks.k2.channel = c2

exchange.channels.c2.type = memory
exchange.channels.c2.capacity = 100
exchange.channels.c2.transactionCapacity = 80

# -------------------------- ruian http send --------------------------
exchange.sources.r3.type = org.apache.flume.source.kafka.KafkaSource
exchange.sources.r3.channels = c3
exchange.sources.r3.zookeeperConnect = 211.157.182.245:2181,211.157.182.246:2181,211.157.182.247:2181,211.157.182.248:2181,211.157.182.249:2181
exchange.sources.r3.topic = exchange-out
exchange.sources.r3.groupId = flume
exchange.sources.r3.kafka.consumer.timeout.ms = 100
exchange.sources.r3.kafka.fetch.message.max.bytes = 15728640

exchange.sinks.k3.type = cn.rtmap.bigdata.ingest.sink.RuianOutSink
exchange.sinks.k3.channel = c3

exchange.channels.c3.type = memory
exchange.channels.c3.capacity = 100000
exchange.channels.c3.transactionCapacity = 80000