wx.sources = r1
wx.sinks = k1
wx.channels = c1

wx.sources.r1.type = cn.rtmap.bigdata.ingest.source.ShakeSource
wx.sources.r1.sched.express = 0 0 9 * * ? *
wx.sources.r1.sched.threads = 1
wx.sources.r1.data.from = weixin
wx.sources.r1.shake.statis.url = https://api.weixin.qq.com/shakearound/statistics/page?access_token=
wx.sources.r1.shake.token.url = http://weix.rtmap.com/mp/wxb5e69065eb3d67ce/token
wx.sources.r1.sql.driver = com.mysql.jdbc.Driver
wx.sources.r1.sql.jdbc.url = jdbc:mysql://rdsbu5ogq3pvu740c9c9.mysql.rds.aliyuncs.com:3306/promo
wx.sources.r1.sql.user = luck3_read
wx.sources.r1.sql.passwd = 123456A
wx.sources.r1.sql.pageid.query = SELECT id, title, description, comment, create_time FROM wx_shake_page where create_time <= subdate(current_date, 1)
wx.sources.r1.channels = c1

wx.sources.r1.interceptors = i1 i2
wx.sources.r1.interceptors.i1.type = cn.rtmap.bigdata.ingest.intercept.EventCompressor$Builder
wx.sources.r1.interceptors.i2.type = cn.rtmap.bigdata.ingest.intercept.EventSerializer$Builder

wx.sinks.k1.type = org.apache.flume.sink.kafka.KafkaSink
wx.sinks.k1.topic = weixin
wx.sinks.k1.brokerList = 211.157.182.227:6668,211.157.182.228:6668,211.157.182.229:6668
wx.sinks.k1.requiredAcks = 1
wx.sinks.k1.batchSize = 20
wx.sinks.k1.channel = c1

#wx.sinks.k1.type = logger
#wx.sinks.k1.channel = c1

# Use a channel which buffers events in memory
wx.channels.c1.type = memory
wx.channels.c1.capacity = 100000
wx.channels.c1.transactionCapacity = 80000
